"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9659],{4143:function(e,t,r){r.d(t,{A:function(){return V}});var n,i=r(63696),a=r(59310),o=r(81070),c=r(1224),l=r(49565),s=r(31602),u=r(54585),d=r(49348),p={follows:{enabled:"followed",success:"unfollowed"}},v="km5ifdffcjdoc",f="19t3g6sdf3o50",b=r(25987),m=(e,t)=>{var{activityType:r,resourceType:n,resourceId:i,resourceDomain:a}=e;return(0,b.A)().withAction(p[r][t]).withResourceType(n).withResourceId(i).withResourceDomain(a).build()},y=r(77652),g=r(83051),h=r(91785),O=r(20641),P=r(11545),w=r(74437),E=r(27336),j=r(55522);var A,S,T=e=>{var t,r,{theme:i,hasTopicTagsExperimentStyles:a}=e,o="linear-gradient(".concat(i.colourPalette.border," 0 0) -2px / 1px 82%");return a&&(0,h.AH)(n||(t=["\n      > button {\n        background: ",", ",";\n        background-repeat: no-repeat;\n        color: ",";\n      }\n    "],r||(r=t.slice(0)),n=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),o,i.colourPalette.midground,i.colourPalette.primary)},x=["states","currentState","onClick","focusRef","touchRef","alignContent","iconOnly","iconPosition","useFullWidth","hasTopicTagsExperimentStyles"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(null,arguments)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=["enabledActive","success","successHover"],I=(0,g.default)("div",{target:"e19pe5mb4",label:"ButtonWrapper"})("html.no-js &{display:none;}width:",(e=>{var{useFullWidth:t}=e;return t?"100%":"fit-content"}),";",T,";"),W=(0,g.default)("div",{target:"e19pe5mb3",label:"ContentsWrapper"})("display:grid;width:",(e=>{var{useFullWidth:t}=e;return t?"100%":"fit-content"}),";"),F=(0,g.default)("span",{target:"e19pe5mb2",label:"ButtonStyles"})("display:flex;justify-content:",(e=>{var{alignContent:t}=e;return"start"===t?"flex-start":"center"}),";align-items:center;grid-column:1;grid-row:1;",O.NP," ",P.Vk," ",(e=>{var{visible:t}=e;return!t&&(0,h.AH)(A||(A=R(["\n      visibility: hidden;\n    "])))}),";",(e=>{var{reverseOrder:t}=e;return t&&(0,h.AH)(S||(S=R(["\n      flex-direction: row-reverse;\n    "])))}),";"),H=(0,g.default)("span",{target:"e19pe5mb1",label:"IconWrapper"})("width:",w.SPACING_5,";height:1em;",(e=>{var{iconOnly:t,reverseOrder:r}=e;return t?"":r?"padding-left: ".concat(w.SPACING_2):"padding-right: ".concat(w.SPACING_2,";")}),";"),N=(0,g.default)("span",{target:"e19pe5mb0",label:"ButtonText"})({name:"3abrc0",styles:"width:auto"}),B=e=>{var{iconType:t,iconOnly:r,iconPosition:n,visible:a,alignContent:o,children:c}=e,l="end"===n;return i.createElement(F,{alignContent:o,reverseOrder:l,visible:a},t&&i.createElement(H,{"data-testid":t,iconPosition:n,reverseOrder:l,iconOnly:r},r?i.createElement(j.A,{type:t},c):i.createElement(j.A,{type:t})),!r&&i.createElement(N,null,c))},z=e=>{var{states:t,iconOnly:r,iconPosition:n}=e;return i.createElement(i.Fragment,null,(e=>Object.entries(e).reduce(((t,r)=>{var[n,{text:i,iconType:a}]=r;return t.some((e=>(null==e?void 0:e.text)===i&&(null==e?void 0:e.iconType)===a))||t.push(L(L({},e[n]),{},{state:n})),t}),[]))(t).map((e=>{var{state:t,text:a,iconType:o}=e;return i.createElement(B,{key:t,visible:!1,iconType:o,iconOnly:r,iconPosition:n},a)})))},K=e=>{var{states:t,currentState:r,onClick:n,focusRef:o,touchRef:c,alignContent:l,iconOnly:s,iconPosition:u,useFullWidth:d,hasTopicTagsExperimentStyles:p}=e,v=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,x),{text:f,emphasis:b,iconType:m,visuallyHiddenText:g}=t[r],h=_.includes(r);return i.createElement(I,{useFullWidth:d,hasTopicTagsExperimentStyles:p},i.createElement(E.A,C({"aria-atomic":!0,"aria-live":"polite","aria-pressed":h,emphasis:b,onClick:n,width:s&&!d?"content-length":"full",trackRef:(0,y.k)(o,c)},v),i.createElement(W,{useFullWidth:d},i.createElement(B,{visible:!0,iconType:m,iconOnly:s,alignContent:l,iconPosition:u},i.createElement("span",{"data-testid":"uasButtonText"},f),i.createElement(a.A,null,g)),!s&&i.createElement(z,{states:t,iconOnly:s,iconPosition:u}))))};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=e=>{var{states:t,initialState:r="enabled",activityConfig:n,setSignInPrompt:p,env:b,alignContent:g="centre",iconOnly:h,iconPosition:O="start",useFullWidth:P=!1,panelTitle:w,panelContent:E,panelMaxWidthPx:j="336",panelAlignment:A="left",panelExpanded:S=!1,deleteActivityConfig:T={deleteOnSuccess:!1,deletePreviousAction:null,globalId:null},panelTheme:x,tracking:C={},onSuccess:k=(()=>!0),isInTopicTagsExperiment:L=!1,experimentAdditionalOnClick:D}=e,[R,_]=(0,s.i)(),[I,W]=(0,u.P)(),[F,H]=(0,i.useState)(!1),N=(0,i.useId)(),B=(0,i.useId)(),[z,G]=(0,i.useState)(r),[U,V]=(0,i.useState)(S),[q,J]=(0,i.useState)(!1),[Q,X]=(0,i.useState)(r),Y=((e,t)=>{var{activityType:r}=e,n="live"===t,i=n?v:f,a=n?t:"test";return(0,d.A)({apiKey:i,environment:a,activityType:r,tokenRefreshToggle:!0,timeout:3e3})})(n,b),Z="".concat(z,"Hover"),$=_&&!W&&t[Z]?Z:z,ee="".concat(t[$].text).concat(t[$].visuallyHiddenText),te=(e,r)=>{var n;return e.subitem?M(M(M({},e),r),{},{event:M(M(M({},e.event),r.event),{},{entity_name:"subitem"}),subitem:M(M(M({},e.subitem),r.subitem),{},{type:"user activity service button",text:null!==(n=t[Q].trackingText)&&void 0!==n?n:t[Q].text})}):M(M(M({},e),r),{},{item:M(M(M({},e.item),r.item),{},{type:"user activity service button",text:t[Q].text})})},re=te(C,{eventAction:t[Q].statAction}),ne=e=>{if(J(!0),V(!0),G(e),window.Reverb){var r=te(C,{eventAction:"error",event:{category:"error"},error:{type:t.enabled.statAction,name:"".concat(t[Q].statAction," error"),message:"Sorry, something went wrong. Check your connection, refresh the page and try again."}});window.Reverb.userActionEvent("viewability",void 0,r)}};(0,i.useEffect)((()=>{H((0,l.A)())}),[]);var ie={enabled:()=>{var e=m(n,"enabled"),t=(0,y.u)(1e3),r=Y.post(e);G("enabledActive"),Promise.all([t,r]).then((()=>{G("success"),X("success");var e=k();V(e)})).catch((()=>ne("enabled")))},success:()=>{var e=!T.deleteOnSuccess&&m(n,"success"),t=(0,y.u)(1e3),r=T.deleteOnSuccess?Y.delete(T.deletePreviousAction,T.globalId):Y.post(e);G("successActive"),Promise.all([t,r]).then((()=>{G("enabled"),X("enabled")})).catch((()=>ne("success")))},signedOut:()=>{var e=(0,y.u)(100);Promise.all([e]).then((()=>{p({show:!0}),G("signedOut"),X("signedOut")}))},error:()=>{var e=(0,y.u)(100);G("enabledActive"),J(!0),Promise.all([e]).then((()=>ne(r)))}},ae=()=>{D&&D(),J(!1),V(!1);var e=(0,l.A)();F||!e?e?ie[z]&&ie["signedOut"===z?r:z]():ie.signedOut():ie.error()},oe=L&&"enabled"===$;return i.createElement(o.A,{id:B,expanded:U,panelStateCallback:V,panelTitle:q?"Sorry, something went wrong":w,panelType:q?"error":"midground",panelIcon:q&&"labels:warning",panelMaxWidthPx:j,horizontalAlignment:A,panelTheme:x,isInTopicTagsExperiment:L,button:i.createElement(c.C,{tracking:re,viewKey:Q,trackKeyboardSelects:!0,stopPropagation:!0},(e=>{var{trackRef:r}=e;return i.createElement("div",{ref:r},i.createElement(K,{states:t,currentState:$,onClick:ae,focusRef:R,touchRef:I,alignContent:g,iconOnly:h,iconPosition:O,useFullWidth:P,"aria-labelledby":N,"aria-expanded":U,hasTopicTagsExperimentStyles:oe}),i.createElement(a.A,{as:"p",id:N,"aria-hidden":"true"},q?"There was a problem, try again":ee))}))},q?"Check your connection, refresh the page and try again.":E)}},77652:function(e,t,r){r.d(t,{k:function(){return i},u:function(){return n}});var n=e=>new Promise((t=>setTimeout(t,e))),i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{t&&e&&("function"==typeof t?t(e):t.current=e.current)}))}}},31602:function(e,t,r){r.d(t,{i:function(){return i}});var n=r(63696),i=()=>{var[e,t]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>t(!0)),[]),i=(0,n.useCallback)((()=>t(!1)),[]),a=(0,n.useCallback)((()=>t(!0)),[]),o=(0,n.useCallback)((()=>t(!1)),[]),c=(0,n.useRef)();return[(0,n.useCallback)((e=>{c.current&&(c.current.removeEventListener("focus",r),c.current.removeEventListener("blur",i),c.current.removeEventListener("mouseover",a),c.current.removeEventListener("mouseout",o)),c.current=e,c.current.addEventListener("focus",r),c.current.addEventListener("blur",i),c.current.addEventListener("mouseover",a),c.current.addEventListener("mouseout",o)}),[r,i,a,o]),e]}},54585:function(e,t,r){r.d(t,{P:function(){return i}});var n=r(63696),i=()=>{var[e,t]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>t(!0)),[]),i=(0,n.useRef)();return[(0,n.useCallback)((e=>{i.current&&(i.current.removeEventListener("touchstart",r,{passive:!0}),i.current.removeEventListener("touchend",r)),i.current=e,i.current.addEventListener("touchstart",r,{passive:!0}),i.current.addEventListener("touchend",r)}),[r]),e]}}}]);